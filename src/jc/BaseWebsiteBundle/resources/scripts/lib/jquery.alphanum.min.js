/********************************************************************
* Limit the characters that may be entered in a text field
* Common options: alphanumeric, alphabetic or numeric
* Kevin Sheedy, 2012
* http://github.com/KevinSheedy/jquery.alphanum
*********************************************************************/
!function(a){function k(){var a="!@#$%^&*()+=[]\\';,/{}|\":<>?~`.-_";return a+=" "}function l(){var a="¬€£¦";return a}function m(b,c,d){b.each(function(){var b=a(this);b.off(".alphanum").on("keyup.alphanum change.alphanum paste.alphanum",function(a){var e="";a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.getData&&(e=a.originalEvent.clipboardData.getData("text/plain")),setTimeout(function(){q(b,c,d,e)},0)}).on("keypress.alphanum",function(a){var e=a.charCode?a.charCode:a.which;if(!(p(e)||a.ctrlKey||a.metaKey)){var f=String.fromCharCode(e),g=b.selection(),h=g.start,i=g.end,j=b.val(),k=j.substring(0,h)+f+j.substring(i),l=c(k,d);l!=k&&a.preventDefault()}})})}function n(b,c){var d=parseFloat(a(b).val()),e=a(b);return isNaN(d)?void e.val(""):(o(c.min)&&d<c.min&&e.val(""),void(o(c.max)&&d>c.max&&e.val("")))}function o(a){return!isNaN(a)}function p(a){return!(a>=32)&&(10!=a&&13!=a)}function q(a,b,c,d){var e=a.val();""==e&&d.length>0&&(e=d);var f=b(e,c);if(e!=f){var g=a.alphanum_caret();a.val(f),e.length==f.length+1?a.alphanum_caret(g-1):a.alphanum_caret(g)}}function r(c,e){"undefined"==typeof e&&(e=b);var f,g={};return f="string"==typeof c?d[c]:"undefined"==typeof c?{}:c,a.extend(g,e,f),"undefined"==typeof g.blacklist&&(g.blacklistSet=G(g.allow,g.disallow)),g}function s(b){var d,f={};return d="string"==typeof b?e[b]:"undefined"==typeof b?{}:b,a.extend(f,c,d),f}function t(a,b,c){return!(c.maxLength&&a.length>=c.maxLength)&&(c.allow.indexOf(b)>=0||(!(!c.allowSpace||" "!=b)||!!(c.allowNewline||"\n"!=b&&"\r"!=b)&&(!c.blacklistSet.contains(b)&&(!(!c.allowNumeric&&i[b])&&(!(!c.allowUpper&&D(b))&&(!(!c.allowLower&&E(b))&&(!(!c.allowCaseless&&F(b))&&(!(!c.allowLatin&&j.contains(b))&&(!!c.allowOtherCharSets||!(!i[b]&&!j.contains(b)))))))))))}function u(a,b,c){if(i[b])return!w(a,c)&&(!y(a,c)&&(!x(a,c)&&(!z(a+b,c)&&!A(a+b,c))));if(c.allowPlus&&"+"==b&&""==a)return!0;if(c.allowMinus&&"-"==b&&""==a)return!0;if(b==g&&c.allowThouSep&&J(a))return!0;if(b==h){if(a.indexOf(h)>=0)return!1;if(c.allowDecSep&&0===c.maxDecimalPlaces)return!1;if(c.allowDecSep)return!0}return!1}function v(a){return a+="",a.replace(/[^0-9]/g,"").length}function w(a,b){var c=b.maxDigits;if(""===c||isNaN(c))return!1;var d=v(a);return d>=c}function x(a,b){var c=b.maxDecimalPlaces;if(""===c||isNaN(c))return!1;var d=a.indexOf(h);if(d==-1)return!1;var e=a.substring(d),f=v(e);return f>=c}function y(a,b){var c=b.maxPreDecimalPlaces;if(""===c||isNaN(c))return!1;var d=a.indexOf(h);if(d>=0)return!1;var e=v(a);return e>=c}function z(a,b){if(!b.max||b.max<0)return!1;var c=parseFloat(a);return c>b.max}function A(a,b){if(!b.min||b.min>0)return!1;var c=parseFloat(a);return c<b.min}function B(a,b){if("string"!=typeof a)return a;var f,c=a.split(""),d=[],e=0;for(e=0;e<c.length;e++){f=c[e];var g=d.join("");t(g,f,b)&&d.push(f)}var h=d.join("");return b.forceLower?h=h.toLowerCase():b.forceUpper&&(h=h.toUpperCase()),h}function C(a,b){if("string"!=typeof a)return a;var f,c=a.split(""),d=[],e=0;for(e=0;e<c.length;e++){f=c[e];var g=d.join("");u(g,f,b)&&d.push(f)}return d.join("")}function D(a){var b=a.toUpperCase(),c=a.toLowerCase();return a==b&&b!=c}function E(a){var b=a.toUpperCase(),c=a.toLowerCase();return a==c&&b!=c}function F(a){return a.toUpperCase()==a.toLowerCase()}function G(a,b){var c=new K(f+b),d=new K(a),e=c.subtract(d);return e}function H(){var d,a="0123456789".split(""),b={},c=0;for(c=0;c<a.length;c++)d=a[c],b[d]=!0;return b}function I(){var a="abcdefghijklmnopqrstuvwxyz",b=a.toUpperCase(),c=new K(a+b);return c}function J(a){if(0==a.length)return!1;var b=a.indexOf(h);if(b>=0)return!1;var c=a.indexOf(g);if(c<0)return!0;var d=a.lastIndexOf(g),e=a.length-d-1;if(e<3)return!1;var f=v(a.substring(c));return!(f%3>0)}function K(a){"string"==typeof a?this.map=L(a):this.map={}}function L(a){var e,b={},c=a.split(""),d=0;for(d=0;d<c.length;d++)e=c[d],b[e]=!0;return b}a.fn.alphanum=function(a){var b=r(a),c=this;return m(c,B,b),this},a.fn.alpha=function(a){var b=r("alpha"),c=r(a,b),d=this;return m(d,B,c),this},a.fn.numeric=function(a){var b=s(a),c=this;return m(c,C,b),c.blur(function(){n(this,b)}),this};var b={allow:"",disallow:"",allowSpace:!0,allowNewline:!0,allowNumeric:!0,allowUpper:!0,allowLower:!0,allowCaseless:!0,allowLatin:!0,allowOtherCharSets:!0,forceUpper:!1,forceLower:!1,maxLength:NaN},c={allowPlus:!1,allowMinus:!0,allowThouSep:!0,allowDecSep:!0,allowLeadingSpaces:!1,maxDigits:NaN,maxDecimalPlaces:NaN,maxPreDecimalPlaces:NaN,max:NaN,min:NaN},d={alpha:{allowNumeric:!1},upper:{allowNumeric:!1,allowUpper:!0,allowLower:!1,allowCaseless:!0},lower:{allowNumeric:!1,allowUpper:!1,allowLower:!0,allowCaseless:!0}},e={integer:{allowPlus:!1,allowMinus:!0,allowThouSep:!1,allowDecSep:!1},positiveInteger:{allowPlus:!1,allowMinus:!1,allowThouSep:!1,allowDecSep:!1}},f=k()+l(),g=",",h=".",i=H(),j=I();K.prototype.add=function(a){var b=this.clone();for(var c in a.map)b.map[c]=!0;return b},K.prototype.subtract=function(a){var b=this.clone();for(var c in a.map)delete b.map[c];return b},K.prototype.contains=function(a){return!!this.map[a]},K.prototype.clone=function(){var a=new K;for(var b in this.map)a.map[b]=!0;return a},a.fn.alphanum.backdoorAlphaNum=function(a,b){var c=r(b);return B(a,c)},a.fn.alphanum.backdoorNumeric=function(a,b){var c=s(b);return C(a,c)},a.fn.alphanum.setNumericSeparators=function(a){1==a.thousandsSeparator.length&&1==a.decimalSeparator.length&&(g=a.thousandsSeparator,h=a.decimalSeparator)}}(jQuery),function(a){function b(a,b){if(a.createTextRange){var c=a.createTextRange();c.move("character",b),c.select()}else null!=a.selectionStart&&(a.focus(),a.setSelectionRange(b,b))}function c(a){if("selection"in document){var b=a.createTextRange();try{b.setEndPoint("EndToStart",document.selection.createRange())}catch(a){return 0}return b.text.length}if(null!=a.selectionStart)return a.selectionStart}a.fn.alphanum_caret=function(d,e){return"undefined"==typeof d?c(this.get(0)):this.queue(function(c){if(isNaN(d)){var f=a(this).val().indexOf(d);e===!0?f+=d.length:"undefined"!=typeof e&&(f+=e),b(this,f)}else b(this,d);c()})}}(jQuery),function(a){var d=function(a){return a?a.ownerDocument.defaultView||a.ownerDocument.parentWindow:window},e=function(b,c){var d=a.Range.current(b).clone(),e=a.Range(b).select(b);return d.overlaps(e)?(d.compare("START_TO_START",e)<1?(startPos=0,d.move("START_TO_START",e)):(fromElementToCurrent=e.clone(),fromElementToCurrent.move("END_TO_START",d),startPos=fromElementToCurrent.toString().length),d.compare("END_TO_END",e)>=0?endPos=e.toString().length:endPos=startPos+d.toString().length,{start:startPos,end:endPos}):null},f=function(b){var c=d(b);if(void 0!==b.selectionStart)return document.activeElement&&document.activeElement!=b&&b.selectionStart==b.selectionEnd&&0==b.selectionStart?{start:b.value.length,end:b.value.length}:{start:b.selectionStart,end:b.selectionEnd};if(c.getSelection)return e(b,c);try{if("input"==b.nodeName.toLowerCase()){var f=d(b).document.selection.createRange(),g=b.createTextRange();g.setEndPoint("EndToStart",f);var h=g.text.length;return{start:h,end:h+f.text.length}}var i=e(b,c);if(!i)return i;var j=a.Range.current().clone(),k=j.clone().collapse().range,l=j.clone().collapse(!1).range;return k.moveStart("character",-1),l.moveStart("character",-1),0!=i.startPos&&""==k.text&&(i.startPos+=2),0!=i.endPos&&""==l.text&&(i.endPos+=2),i}catch(a){return{start:b.value.length,end:b.value.length}}},g=function(a,b,c){var e=d(a);if(a.setSelectionRange)void 0===c?(a.focus(),a.setSelectionRange(b,b)):(a.select(),a.selectionStart=b,a.selectionEnd=c);else if(a.createTextRange){var f=a.createTextRange();f.moveStart("character",b),c=c||b,f.moveEnd("character",c-a.value.length),f.select()}else if(e.getSelection){var g=e.document,h=e.getSelection(),j=g.createRange(),k=[b,void 0!==c?c:b];i([a],k),j.setStart(k[0].el,k[0].count),j.setEnd(k[1].el,k[1].count),h.removeAllRanges(),h.addRange(j)}else if(e.document.body.createTextRange){var j=document.body.createTextRange();j.moveToElementText(a),j.collapse(),j.moveStart("character",b),j.moveEnd("character",void 0!==c?c:b),j.select()}},h=function(a,b,c,d){"number"==typeof c[0]&&c[0]<b&&(c[0]={el:d,count:c[0]-a}),"number"==typeof c[1]&&c[1]<=b&&(c[1]={el:d,count:c[1]-a})},i=function(a,b,c){var d,e;c=c||0;for(var f=0;a[f];f++)d=a[f],3===d.nodeType||4===d.nodeType?(e=c,c+=d.nodeValue.length,h(e,c,b,d)):8!==d.nodeType&&(c=i(d.childNodes,b,c));return c};jQuery.fn.selection=function(a,b){return void 0!==a?this.each(function(){g(this,a,b)}):f(this[0])},a.fn.selection.getCharElement=i}(jQuery);